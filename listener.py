import socket
from time import sleep
from os import getuid

print('''           _                                 _                     _    _ 
  __ _  __| | __ _ _ __ ___  _ __   ___ _ __| | _______      _____| | _(_)
 / _` |/ _` |/ _` | '_ ` _ \| '_ \ / _ \ '__| |/ / _ \ \ /\ / / __| |/ / |
| (_| | (_| | (_| | | | | | | |_) |  __/ |  |   < (_) \ V  V /\__ \   <| |
 \__,_|\__,_|\__,_|_| |_| |_| .__/ \___|_|  |_|\_\___/ \_/\_/ |___/_|\_\_|
                            |_|                                           
''')
print("https://github.com/adamperkowski\nhttps://www.reddit.com/user/xPedalitto\n\nOfficial repo: https://github.com/adamperkowski/file-transfer-exploit\n\n\n")

dec = ["  \033[33m[ ? ]\033[0m ", "\033[33m?\033[0m  ", "  \033[34m[ * ]\033[0m ", "  \033[31m[ ! ]\033[0m ", "  \033[32m[ * ]\033[0m "]
def fo():
    print("\n\033[31mFUCK OFF  FUCK OFF  FUCK OFF  FUCK OFF\033[0m\n")
    sleep(1)
    exit()

if(getuid() != 0):
    print(f'\n{dec[3]} Please... pleeeaaaase im begging you... please run this with root privileges!')
    fo()

sockObject = socket.socket()

try:
    hostIP = input(f'{dec[0]} Host IP address {dec[1]}')
    port = int(input(f'{dec[0]} Listener port   {dec[1]}'))

except:
    print(f'\n{dec[3]} U dumb or sum?')
    fo()

try:
    sockObject.bind((hostIP, port))
    sockObject.listen()

except: 
    print(f'\n{dec[3]} There was a problem (you) :(')
    fo()

while True:
    print(f'\n{dec[2]} Listening on {hostIP}:{port}')
    connected = sockObject.accept()

    print(f'\n{dec[4]} Connection estabilished with {connected[1][0]}')
    print(f'{dec[2]} Ping: \n')

    print(f'\n{dec[3]} Connection interrupted :(')